<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>Kefova</title>
    <link rel="stylesheet" href="style.css"> </head>

<head>
    <header class="header">
        <div> <img src="assets/gallery/icon/kefova.png" alt="" class="logo"> </div>
        <div class="meny">
            <button class="buttonMeny"><a href="index.html">Головна</a></button>
            <button class="buttonMeny"><a href="prais.html">Прайс Лист</a></button>
            <button class="buttonMeny"><a href="gallery.html">Галерея</a></button>
        </div>
        <div class="seti"> </div>
    </header>
</head>

<body>
    <div class="price">
        <div class="name">
            <h1>Студійна</h1></div>
        <div class="infoPrice">
            <p>1 година зйомки</p>
            <p>Підбір студії</p>
            <p>Підбір одягу та стилю фотосесії</p>
            <p>-----</p>
            <p>результат фотосесії, ви отримуєте ~40 фото з обробкою під мій стиль, або відразу кажіть яка обрабка вам потрібна</p>
            <p>якщо фотосесія в орендованій студії то до ціни + оренда( у мене є моя студія де я роблю творчі проєкти)</p>
            <p>Кожна додаткова година +1000</p>
        </div>
        <div class="opn">
            <p class="grn">1500 Грн</p>
            <button class="galleryButton" onclick="location.href='gallery.html#personal'"> галерея </button>
            <button class="priseButton" id="priseButton">Замовити</button>
        </div>
    </div>
    <div class="price">
        <div class="name">
            <h1>Стріт</h1></div>
        <div class="infoPrice">
            <p>1 година зйомки</p>
            <p>~50 фото з кольорокорекцієї</p>
            <p>Ретуш фото</p>
            <p>Підбір локації, образу</p>
            <p>Кожна додаткова година 1000грн</p>
            <p>-----</p>
            <p>Якщо фотосесія в ботанічному саду або щось подібне за вхід фотографа платить модель </p>

        </div>
        <div class="opn">
            <p class="grn">1500 Грн</p>
            <button class="galleryButton" onclick="location.href='gallery.html#personal'"> галерея </button>
            <button class="priseButton" id="priseButton">Замовити</button>
        </div>
    </div>
    <div class="price">
        <div class="name">
            <h1>Репортажна</h1></div>
        <div class="infoPrice">
            <p>Ціна вказана за дві години</p>
            <p>100-150 фото з кольорокорекцією</p>
            <p>Кожна додаткова година 800грн</p>
        </div>
        <div class="opn">
            <p class="grn">1400 Грн</p>
            <button class="galleryButton" onclick="location.href='gallery.html#personal'"> галерея </button>
            <button class="priseButton" id="priseButton">Замовити</button>
        </div>
    </div>
    <div class="price">
        <div class="name">
            <h1>Love Story</h1></div>
        <div class="infoPrice">
            <p>1:30-2 години</p>
            <p>~80 фото</p>
            <p>Ретуш фото</p>
            <p>Підбір локацій, образу</p>
        </div>
        <div class="opn">
            <p class="grn">2000 Грн</p>
            <button class="galleryButton" onclick="location.href='gallery.html#personal'"> галерея </button>
            <button class="priseButton" id="priseButton">Замовити</button>
        </div>
    </div>
    <form method="post" id="form">
        <input type="hidden" name="entry.your-field-id" value="Photo Shoot">
        <label for="date-input">Фотосесія:</label>
        <select name="options">
            <option value="">вибрати</option>
            <option value="Студійна">Студійна</option>
            <option value="Персональна стріт">Персональна стріт</option>
            <option value="Репортажна">Репортажна</option>
            <option value="Історія кохання">Історія кохання</option>
        </select>
        <br>
        <label for="date-input">Дата фотосесії:</label>
        <input type="date" id="date-input" name="data" required>
        <br>
        <label for="time-input">На котру годину:</label>
        <input type="time" id="time-input" name="time" min="9:00" max="20:00" step="1800" required>
        <br>
        <label for="phone-input">Номер телефону:</label>
        <input type="tel" id="phone-input" name="phone" required>
        <br>
        <label for="name-input">Ваше ім'я:</label>
        <input type="text" id="name-input" name="name" required>
        <br>
        <label for="name-input">Instagram:</label>
        <input type="text" id="instagram-input" name="instagram" required>
        <br>
        <input type="submit" value=" отправить">
        <input type="submit" value=" закрити" onclick="submitForm();"> </form>
    <script>
        const URL_APP = "https://script.google.com/macros/s/AKfycbzqwi9h3USOZIUMabB9IBmD2fumfhJgsHUi0Qq373Q6Ah3pSyoe495sdQzGoe7X7itC2A/exec";
        const form = document.querySelector("#form");
        document.getElementById("form").style.display = "none";
        // указываем адрес отправки формы (нужно только в начале примера)
        form.action = URL_APP;
        // вспомогательная функция проверки заполненности формы
        function isFilled(details) {
            const {
                optionsSelect, name, phone, time, data
            } = details;
            if (!name) return false;
            return true;
        }
        // навешиваем обработчик на отправку формы
        form.addEventListener("submit", async(ev) => {
            // отменяем действие по умолчанию
            ev.preventDefault();
            // получаем ссылки на элементы формы
            const optionsSelect = document.querySelector('select[name="options"]');
            optionsSelect.addEventListener('change', (event) => {
                const selectedOption = event.target.value;
            });
            const name = document.querySelector("[name=name]");
            const instagram = document.querySelector("[name=instagram]");
            const phone = document.querySelector("[name=phone]");
            const time = document.querySelector("[name=time]");
            const data = document.querySelector("[name=data]");
            // собираем данные из элементов формы
            let details = {
                name: name.value.trim()
                , phone: phone.value.charAt()
                ,  instagram: instagram.value.trim()
                , time: time.value
            };
            console.log(optionsSelect, name, phone.value, time, data, instagram.value);
            // если поля не заполнены - прекращаем обработку
            if (!isFilled(details)) return;
            // подготавливаем данные для отправки
            let formBody = [];
            for (let property in details) {
                // кодируем названия и значения параметров
                let encodedKey = encodeURIComponent(property);
                let encodedValue = encodeURIComponent(details[property]);
                formBody.push(encodedKey + "=" + encodedValue);
            }
            // склеиваем параметры в одну строку
            formBody = formBody.join("&");
            // выполняем отправку данных в Google Apps
            const result = await fetch(URL_APP, {
                    method: "POST"
                    , headers: {
                        "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8"
                    , }
                    , cors: "no-cors"
                    , body: formBody
                , }).then((res) => res.json()).catch((err) => alert("Ошибка!"))
                // .then((res) => console.log(res));
            if (result && result.type === 'success') {
                name.value = '';
                instagram.value = '';
                phone.value = '';
                time.value = '';
                optionsSelect.value = '';
                document.getElementById("form").style.display = "none";
                alert('Спасибо за заявку!')
            }
            if (result && result.type === 'error') {
                alert(`заїбало( ${result.errors}`)
            }
        });
        const dateInput = document.querySelector('#date-input');
        const today = new Date().toISOString().split('T')[0];
        dateInput.setAttribute('min', today);
        //form
        const orderButton = document.querySelectorAll("#priseButton");
        orderButton.forEach(button => {
            button.addEventListener("click", () => {
                // Center the form on the screen
                form.style.position = "fixed";
                form.style.top = "50%";
                form.style.left = "50%";
                form.style.transform = "translate(-50%, -50%)";
                // Show the form
                form.style.display = "block";
            });
        });

        function submitForm() {
            document.getElementById("form").style.display = "none";
        }
    </script>
</body>
<footer>
    <p> Kefova © Всі права захищені.</p>
</footer>

</html>
